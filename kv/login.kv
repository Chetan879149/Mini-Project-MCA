<LoginSignupScreen>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Logo
        Image:
            source: "assets/logo2.png"
            allow_stretch: True
            keep_ratio: True
            size_hint_y: None
            height: dp(86)
            pos_hint: {"top": 0.99, "center_x": 0.5}

        # Title
        Label:
            text: root.title_text
            font_size: "26sp"
            bold: True
            color: 0.13, 0.49, 0.37, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.78}

        # Login / Signup Form
        BoxLayout:
            id: form_layout
            orientation: "vertical"
            size_hint: 0.85, None
            height: dp(330)
            pos_hint: {"center_x": 0.5, "center_y": 0.43}
            spacing: 11

            # Default login fields
            TextInput:
                id: adhar_input
                hint_text: "Aadhar No."
                multiline: False
                background_normal: ''
                background_color: 0.96, 0.99, 0.97, 1
                foreground_color: 0.13, 0.49, 0.37, 1
                size_hint_y: None
                height: dp(40)
                font_size: '15sp'
                padding: [10, 10]
                radius: [6,]

            TextInput:
                id: password_input
                hint_text: "Password"
                multiline: False
                password: True
                background_normal: ''
                background_color: 0.96, 0.99, 0.97, 1
                foreground_color: 0.13, 0.49, 0.37, 1
                size_hint_y: None
                height: dp(40)
                font_size: '15sp'
                padding: [10, 10]
                radius: [6,]

            Spinner:
                id: role_spinner
                text: "Select Role"
                values: ["Admin", "Doctor", "Patient"]
                size_hint_y: None
                height: dp(30)
                background_color: 0.13, 0.49, 0.37, 1
                color: 1, 1, 1, 1
                font_size: "14sp"

            Button:
                text: "Log In"
                size_hint_y: None
                height: dp(36)
                background_color: 0.13, 0.49, 0.37, 1
                color: 1, 1, 1, 1
                font_size: '16sp'
                bold: True
                radius: [8,]
                on_release: root.validate_login()

            BoxLayout:
                orientation: 'vertical'
                spacing: 6
                size_hint_y: None
                height: dp(60)
                pos_hint: {"center_x": 0.5}

                Button:
                    text: "Forgot Password?"
                    color: 0.18, 0.34, 0.82, 1
                    background_color: 0, 0, 0, 0
                    font_size: '14sp'
                    size_hint_y: None
                    height: dp(25)
                    on_release: root.forgot_password()

                Label:
                    text: "Don’t have an account? [ref=signup][color=#2a5bd7]Sign Up[/color][/ref]"
                    markup: True
                    font_size: "14sp"
                    halign: "center"
                    valign: "middle"
                    size_hint_y: None
                    height: dp(25)
                    text_size: self.size
                    on_ref_press: root.switch_form()




# ----------------------------------------------------------
# Forgot Password Screen
# ----------------------------------------------------------
<ForgotPasswordScreen>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "Forgot Password"
            font_size: "24sp"
            bold: True
            color: 0.13, 0.49, 0.37, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.85}

        Label:
            text: "Enter your registered Email ID to receive an OTP"
            font_size: "14sp"
            color: 0.3, 0.3, 0.3, 1
            halign: "center"
            pos_hint: {"center_x": 0.5, "center_y": 0.77}
            text_size: self.width * 0.9, None

        TextInput:
            id: reset_input
            hint_text: "Email ID"
            size_hint: 0.8, None
            height: dp(40)
            pos_hint: {"center_x": 0.5, "center_y": 0.68}
            multiline: False
            background_normal: ''
            background_color: 0.96, 0.99, 0.97, 1
            foreground_color: 0.13, 0.49, 0.37, 1
            font_size: '15sp'
            padding: [10, 10]
            radius: [6,]

        Button:
            text: "Send OTP"
            size_hint: 0.8, None
            height: dp(36)
            pos_hint: {"center_x": 0.5, "center_y": 0.58}
            background_color: 0.13, 0.49, 0.37, 1
            color: 1, 1, 1, 1
            bold: True
            on_release: root.send_otp()

        TextInput:
            id: otp_input
            hint_text: "Enter OTP"
            size_hint: 0.8, None
            height: dp(40)
            pos_hint: {"center_x": 0.5, "center_y": 0.47}
            multiline: False
            background_normal: ''
            background_color: 0.96, 0.99, 0.97, 1
            foreground_color: 0.13, 0.49, 0.37, 1
            font_size: '15sp'
            padding: [10, 10]
            radius: [6,]

        Button:
            text: "Verify OTP"
            size_hint: 0.8, None
            height: dp(36)
            pos_hint: {"center_x": 0.5, "center_y": 0.37}
            background_color: 0.18, 0.34, 0.82, 1
            color: 1, 1, 1, 1
            bold: True
            on_release: root.verify_otp()

        Button:
            text: "← Back to Login"
            size_hint: None, None
            size: dp(150), dp(36)
            pos_hint: {"center_x": 0.5, "center_y": 0.25}
            background_color: 0, 0, 0, 0
            color: 0.18, 0.34, 0.82, 1
            font_size: '14sp'
            on_release: app.root.current = "login"
